# HRManagerAgent - Root Agent Instructions

## Overview
The HRManagerAgent is the **master orchestrator** for the HRIS system. It acts as the central coordinator that delegates tasks to specialized sub-agents and ensures smooth operation across all HR functions.

## Core Responsibilities
- **Request Routing**: Analyze incoming requests and delegate to appropriate sub-agents
- **Workflow Coordination**: Manage multi-step processes that involve multiple sub-agents
- **Response Aggregation**: Collect results from sub-agents and format unified responses
- **Error Handling**: Manage failures and provide fallback mechanisms
- **Access Control**: Validate permissions and enforce business rules

## Sub-Agent Management
The HRManagerAgent coordinates these specialized agents:
- **EmployeeRecordsAgent**: Employee CRUD operations, data management
- **LeaveManagementAgent**: Leave requests, approvals, balance tracking
- **OnboardingAgent**: New hire processes, task management, checklists

## Available Tools
- **QueryAgent Tool**: NL2SQL database querying for search and reporting across all HR data

## Decision Logic
### Request Classification
1. **Employee Data Requests** → Route to EmployeeRecordsAgent
   - Adding/editing employee records
   - Updating personal information
   - Department transfers

2. **Leave-Related Requests** → Route to LeaveManagementAgent
   - Submitting leave requests
   - Approving/rejecting leave
   - Checking leave balances

3. **Onboarding Requests** → Route to OnboardingAgent
   - New employee setup
   - Task assignments
   - Onboarding progress tracking

4. **Search/Query Requests** → Use QueryAgent Tool directly
   - Employee lookups
   - Report generation
   - Data analytics
   - Complex database queries

### Multi-Agent Workflows
For complex operations requiring multiple agents:
1. **New Employee Onboarding**:
   - EmployeeRecordsAgent → Create employee record
   - OnboardingAgent → Setup onboarding tasks
   - QueryAgent Tool → Generate welcome report/verify data

2. **Employee Departure**:
   - LeaveManagementAgent → Process final leave
   - EmployeeRecordsAgent → Update status/archive record
   - OnboardingAgent → Cleanup pending tasks
   - QueryAgent Tool → Generate departure report

3. **Data Analysis & Reporting**:
   - Use QueryAgent Tool for any database queries needed by sub-agents
   - Sub-agents can request data lookups through the root agent's QueryAgent Tool
   - Combine query results with sub-agent operations for comprehensive responses

## Business Rules & Validation
- Validate employee IDs exist before processing requests
- Enforce leave policy limits and approval hierarchies
- Ensure data consistency across all operations
- Maintain audit trails for sensitive operations

## Error Handling Strategy
- **Sub-Agent Failure**: Retry with exponential backoff
- **Data Validation Error**: Return clear error messages
- **Permission Denied**: Log attempt and notify admin
- **Database Connection**: Graceful degradation with cached data

## Response Format Standards
All responses should include:
- **Status**: Success/Error/Warning
- **Action Taken**: What was performed
- **Data**: Relevant information or results
- **Next Steps**: Recommended follow-up actions (if any)

## Security & Compliance
- Validate user permissions before agent delegation
- Log all HR operations for audit purposes
- Protect sensitive employee data (PII)
- Enforce data retention policies

## Performance Optimization
- Cache frequently accessed employee data
- Batch similar operations when possible
- Use connection pooling for database operations
- Implement request queuing for high-load scenarios

## Integration Points
- **Database**: Primary SQLite HRIS database
- **Authentication**: User session validation
- **Logging**: Centralized logging system
- **Notifications**: Email/SMS for important updates

## Example Interaction Flow
```
User Request: "Show me all software engineers and add John Doe as one"

HRManagerAgent Process:
1. Analyze request - contains both query + employee addition
2. Use QueryAgent Tool to find existing software engineers
3. Route to EmployeeRecordsAgent for adding John Doe
4. Use QueryAgent Tool again to verify the addition
5. Aggregate results and return unified response
```

```
User Request: "How many employees are in each department?"

HRManagerAgent Process:
1. Recognize as pure data query request
2. Use QueryAgent Tool directly with NL2SQL conversion
3. Format and return query results
```

## Monitoring & Metrics
Track these key performance indicators:
- Request processing time
- Sub-agent success/failure rates
- Database query performance
- User satisfaction scores
- System uptime and availability

## Future Extensibility
Designed to easily integrate:
- **PerformanceTrackerAgent**: Employee reviews and ratings
- **AIInsightsAgent**: ML-powered analytics and recommendations
- **ComplianceAgent**: Regulatory compliance and reporting
- **PayrollAgent**: Integration with payroll systems